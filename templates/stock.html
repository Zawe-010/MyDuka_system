{% extends "base.html" %}
{% block title %} Stock {% endblock %}
{% block content %}

<p>
    Welcome to the Stock Page. This section allows you to monitor and manage the quantity of products
    available in your inventory. You can view all stock entries, track when stock was added, and ensure inventory levels
    are maintained accurately.
    <br><br>
    To add stock for an existing product, click the <strong>"Add Stock"</strong> button. A modal form will appear where
    you can:
<ul>
    <li>Select the product from the dropdown menu.</li>
    <li>Enter the quantity of new stock being added.</li>
</ul>
After submission, the stock record will be stored and reflected in the table below.
<br><br>
The stock table displays each stock entry with the following details:
<ul>
    <li><strong>Stock ID:</strong> A unique identifier for the stock entry.</li>
    <li><strong>Product ID:</strong> The ID of the product associated with this stock entry.</li>
    <li><strong>Stock Quantity:</strong> The amount of stock added.</li>
    <li><strong>Created At:</strong> The timestamp indicating when the stock entry was made.</li>
</ul>
Use this page to maintain an accurate and up-to-date view of your product inventory levels.
</p>


<!-- Button trigger modal -->
<div class="mt-4 mb-4">
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
        Add Stock
    </button>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <form action="/add_stock" method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add Stock</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <br>
                <div>
                    <select name="p-id" class="form-control">
                        <option value="">Select a Product</option>
                        {% for i in products %}
                        <option value="{{ i[0] }}">{{ i[1] }}</option>
                        {% endfor %}
                    </select>
                </div>
                <br>
                <div>
                    <label for="" class="fs-6">Quantity</label>
                    <input type="text" name="quantity" class="form-control">
                </div>
                <br>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Add Stock</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </form>

        </div>
    </div>
</div>

<div>
    <table id="example" class="table table-striped">
        <thead>
            <tr>
                <th>Stock ID</th>
                <th>Product ID</th>
                <th>Stock Quantity</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
            {%  for i in stock %}
                <tr>
                    <td>{{i[0]}}</td>
                    <td>{{i[1]}}</td>
                    <td>{{i[2]}}</td>
                    <td>{{i[3]}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock%}